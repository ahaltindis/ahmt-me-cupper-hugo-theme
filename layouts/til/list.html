{{ define "main" }}
{{ $isTILHome := (eq .CurrentSection .FirstSection)}}
<main id="main">
  <h1 class="page-heading">{{ .Title }}</h1>
  {{ $totalNotes := len .RegularPagesRecursive }}
  <article class="article-prose mb-4 prose-p:mb-2">
    {{ .Content }}
    {{ if $isTILHome }}
    {{ T "total_til_notes_so_far" $totalNotes }}
    {{ end }}
  </article>

  {{ if $isTILHome }}
  <h2 class="text-xl font-miriam mt-7 mb-4">{{ T "categories" }}</h2>
  <ul class="flex">
    {{ range sort .Pages }}
    <li class="after:content-['Â·'] last:after:content-[''] after:inline-block after:pl-2 pr-3">
      <a href="{{ .RelPermalink }}" class="underline">{{ .Title }} ({{ len .Pages }})</a>
    </li>
    {{ end }}
  </ul>
  {{ end }}

  {{ if $isTILHome }}
  <h2 class="text-xl font-miriam mt-8 mb-4">{{ T "recent_til" }}</h2>
  {{ partial "til/summary-list.html" (first 5 .RegularPagesRecursive.ByPublishDate.Reverse) }}
  {{ end }}

  {{ if (not $isTILHome) }}
  {{ partial "til/summary-list.html" .Pages.ByPublishDate.Reverse }}
  {{ end }}

</main>
{{ end }}
